import{r as n,j as e,bp as N,bu as z,bJ as G}from"./react-vendor-ZT4qGmQJ.js";import{f as H}from"./admin-shared-zSvU8R3T.js";import{C as S,j as y,k as T,q as b,c as J,L as c,r as L,s as I,t as w,v as A,w as M,T as R,x as Y,y as k,z as F,A as x,P as K,E as O,B as Q}from"./admin-dashboard-D0amimT5.js";import"./vendor-CRHJa4Zq.js";import"./radix-ui-BA32w1ww.js";import"./admin-orders-DlVxODts.js";function ae({menuItems:m,categories:h}){const{languages:l,isLoadingLanguages:P,isTranslating:t,autoTranslateMutation:v}=H(),[i,u]=n.useState(),[r,E]=n.useState(),[d,g]=n.useState([]),[o,j]=n.useState([]),[p,V]=n.useState(!1),[f,$]=n.useState(!1);n.useEffect(()=>{if(l&&l.length>0){const s=l.find(a=>a.isPrimary);s?u(s.id):l[0]&&u(l[0].id)}},[l]),n.useEffect(()=>{g(p?m.map(s=>s.id):[])},[p,m]),n.useEffect(()=>{j(f?h.map(s=>s.id):[])},[f,h]);const D=s=>{g(a=>a.includes(s)?a.filter(C=>C!==s):[...a,s])},B=s=>{j(a=>a.includes(s)?a.filter(C=>C!==s):[...a,s])},U=()=>{if(!i||!r)return;const s=d.length>0,a=o.length>0;!s&&!a||v.mutate({sourceLanguageId:i,targetLanguageId:r,menuItemIds:s?d:void 0,categoryIds:a?o:void 0})},q=i!==void 0&&r!==void 0&&i!==r&&(d.length>0||o.length>0)&&!t;return P?e.jsxs("div",{className:"flex items-center justify-center p-6",children:[e.jsx(N,{className:"h-6 w-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Loading languages..."})]}):!l||l.length<2?e.jsx(S,{children:e.jsxs(y,{children:[e.jsx(T,{children:"Translation Manager"}),e.jsx(b,{children:"You need at least two languages to perform translations. Please add languages in the language settings."})]})}):e.jsxs(S,{className:"w-full",children:[e.jsxs(y,{children:[e.jsxs(T,{className:"flex items-center",children:[e.jsx(z,{className:"mr-2 h-5 w-5"}),"Translation Manager"]}),e.jsx(b,{children:"Automatically translate your menu items and categories using DeepL API."})]}),e.jsxs(J,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"sourceLanguage",children:"Source Language"}),e.jsxs(L,{value:i==null?void 0:i.toString(),onValueChange:s=>u(Number(s)),disabled:t,children:[e.jsx(I,{id:"sourceLanguage",children:e.jsx(w,{placeholder:"Select source language"})}),e.jsx(A,{children:l.map(s=>e.jsxs(M,{value:s.id.toString(),children:[s.name," (",s.code.toUpperCase(),")",s.isPrimary&&" (Primary)"]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"targetLanguage",children:"Target Language"}),e.jsxs(L,{value:r==null?void 0:r.toString(),onValueChange:s=>E(Number(s)),disabled:t,children:[e.jsx(I,{id:"targetLanguage",children:e.jsx(w,{placeholder:"Select target language"})}),e.jsx(A,{children:l.filter(s=>s.id!==i).map(s=>e.jsxs(M,{value:s.id.toString(),children:[s.name," (",s.code.toUpperCase(),")"]},s.id))})]})]})]}),e.jsxs(R,{defaultValue:"menuItems",children:[e.jsxs(Y,{className:"grid w-full grid-cols-2",children:[e.jsxs(k,{value:"menuItems",children:["Menu Items (",d.length,"/",m.length,")"]}),e.jsxs(k,{value:"categories",children:["Categories (",o.length,"/",h.length,")"]})]}),e.jsxs(F,{value:"menuItems",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[e.jsx(x,{id:"selectAllMenuItems",checked:p,onCheckedChange:s=>V(!!s),disabled:t}),e.jsx(c,{htmlFor:"selectAllMenuItems",children:"Select All"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:m.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx(x,{id:`menuItem-${s.id}`,checked:d.includes(s.id),onCheckedChange:()=>D(s.id),disabled:t}),e.jsx(c,{htmlFor:`menuItem-${s.id}`,className:"flex-1 cursor-pointer",children:s.name})]},s.id))})]}),e.jsxs(F,{value:"categories",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[e.jsx(x,{id:"selectAllCategories",checked:f,onCheckedChange:s=>$(!!s),disabled:t}),e.jsx(c,{htmlFor:"selectAllCategories",children:"Select All"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:h.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx(x,{id:`category-${s.id}`,checked:o.includes(s.id),onCheckedChange:()=>B(s.id),disabled:t}),e.jsx(c,{htmlFor:`category-${s.id}`,className:"flex-1 cursor-pointer",children:s.name})]},s.id))})]})]})]}),t&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Translating..."}),e.jsx(N,{className:"h-4 w-4 animate-spin text-primary"})]}),e.jsx(K,{value:v.isPending?33:100,className:"h-2"})]})]}),e.jsx(O,{children:e.jsx(Q,{onClick:U,disabled:!q,className:"w-full",children:t?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Translating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Translate with DeepL"]})})})]})}export{ae as TranslationManager};
