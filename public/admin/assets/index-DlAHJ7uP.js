import{j as e,bH as $,bI as F,r as le,b$ as ne,bD as D,c0 as A,c1 as ge}from"./react-vendor-ZT4qGmQJ.js";import{i as Se,j as Me}from"./admin-shared-zSvU8R3T.js";import{B as r,K as C,C as f,j as V,k as R,r as E,s as B,t as T,v as H,w as v,c as b,D as ae,f as re,g as ce,h as ie,F as z,l as t,m as d,n as x,o,I as N,p as h,i as te,Q as Ce,R as ve,U as fe,V as be,W as P,X as ke,Y as de,Z as xe,_ as oe,$ as he,a0 as je}from"./admin-dashboard-D0amimT5.js";import{aa as me,ab as ue,ac as pe,ad as Ne}from"./vendor-CRHJa4Zq.js";import"./radix-ui-BA32w1ww.js";import"./admin-orders-DlVxODts.js";const De=({row:n,onEdit:c,onDelete:j})=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>c(n.original),children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>j(n.original.id),children:e.jsx(F,{className:"h-4 w-4"})})]}),Ae=({row:n,onEdit:c,onDelete:j})=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>c(n.original),children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>j(n.original.id),children:e.jsx(F,{className:"h-4 w-4"})})]});function Ve({isCategoryDialogOpen:n,setIsCategoryDialogOpen:c,isMenuItemDialogOpen:j,setIsMenuItemDialogOpen:p,editingCategory:O,setEditingCategory:Y,editingMenuItem:q,setEditingMenuItem:K,activeCategory:y,setActiveCategory:Q,categories:m,filteredMenuItems:w,categoryForm:u,menuItemForm:i,handleEditCategory:U,handleDeleteCategory:W,handleEditMenuItem:X,handleDeleteMenuItem:Z,onCategorySubmit:_,onMenuItemSubmit:G,isCategoryLoading:S,isMenuItemLoading:M}){const[l,g]=le.useState([]),[L,I]=le.useState([]),J=me(),ye=[J.accessor("name",{header:C.menu.categoryName,cell:s=>s.getValue()}),J.accessor("sortOrder",{header:C.menu.sortOrder,cell:s=>s.getValue()}),J.display({id:"actions",header:"Actions",cell:s=>e.jsx(De,{row:s.row,onEdit:U,onDelete:W})})],k=me(),we=[k.accessor("name",{header:C.menu.name,cell:s=>s.getValue()}),k.accessor("description",{header:C.menu.description,cell:s=>s.getValue()??"-"}),k.accessor("price",{header:C.menu.price,cell:s=>`$${(s.getValue()/100).toFixed(2)}`}),k.accessor("active",{header:C.menu.active,cell:s=>s.getValue()?"Yes":"No"}),k.display({id:"actions",header:"Actions",cell:s=>e.jsx(Ae,{row:s.row,onEdit:X,onDelete:Z})})],ee=ne({data:m,columns:ye,state:{sorting:l,columnFilters:L},onSortingChange:g,onColumnFiltersChange:I,getCoreRowModel:Ne(),getSortedRowModel:pe(),getFilteredRowModel:ue()}),se=ne({data:w,columns:we,state:{sorting:l,columnFilters:L},onSortingChange:g,onColumnFiltersChange:I,getCoreRowModel:Ne(),getSortedRowModel:pe(),getFilteredRowModel:ue()});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Menu Builder"}),e.jsxs(r,{onClick:()=>p(!0),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Menu Item"]})]}),e.jsxs(f,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{children:"Menu Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(E,{value:y?String(y):"all",onValueChange:s=>Q(s==="all"?null:Number(s)),children:[e.jsx(B,{className:"w-[180px]",children:e.jsx(T,{placeholder:"Filter by category"})}),e.jsxs(H,{children:[e.jsx(v,{value:"all",children:"All Categories"}),m.map(s=>e.jsx(v,{value:String(s.id),children:s.name},s.id))]})]}),e.jsxs(r,{onClick:()=>p(!0),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Menu Item"]})]})]})}),e.jsx(b,{children:w.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No menu items yet. Create your first menu item to get started."})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:se.getHeaderGroups().map(s=>e.jsx("tr",{children:s.headers.map(a=>e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:a.isPlaceholder?null:A(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx("tbody",{children:se.getRowModel().rows.map(s=>e.jsx("tr",{className:"border-t",children:s.getVisibleCells().map(a=>e.jsx("td",{className:"px-4 py-2 text-sm",children:A(a.column.columnDef.cell,a.getContext())},a.id))},s.id))})]})})})]}),e.jsxs(f,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{children:"Categories"}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>c(!0),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Category"]})]})}),e.jsx(b,{children:m.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No categories yet. Create your first category to get started."})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:ee.getHeaderGroups().map(s=>e.jsx("tr",{children:s.headers.map(a=>e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:a.isPlaceholder?null:A(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx("tbody",{children:ee.getRowModel().rows.map(s=>e.jsx("tr",{className:"border-t",children:s.getVisibleCells().map(a=>e.jsx("td",{className:"px-4 py-2 text-sm",children:A(a.column.columnDef.cell,a.getContext())},a.id))},s.id))})]})})})]}),e.jsx(ae,{open:n,onOpenChange:c,children:e.jsxs(re,{children:[e.jsx(ce,{children:e.jsx(ie,{children:O?"Edit Category":"Add Category"})}),e.jsx(z,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(_),className:"space-y-4",children:[e.jsx(t,{control:u.control,name:"name",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Name"}),e.jsx(o,{children:e.jsx(N,{placeholder:"Category name",...s})}),e.jsx(h,{})]})}),e.jsx(t,{control:u.control,name:"sortOrder",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Sort Order"}),e.jsx(o,{children:e.jsx(N,{type:"number",...s})}),e.jsx(h,{})]})}),e.jsxs(te,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>{c(!1),Y(null)},children:"Cancel"}),e.jsx(r,{type:"submit",disabled:S,children:S?"Saving...":"Save"})]})]})})]})}),e.jsx(ae,{open:j,onOpenChange:p,children:e.jsxs(re,{children:[e.jsx(ce,{children:e.jsx(ie,{children:q?"Edit Menu Item":"Add Menu Item"})}),e.jsx(z,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(G),className:"space-y-4",children:[e.jsx(t,{control:i.control,name:"name",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Name"}),e.jsx(o,{children:e.jsx(N,{placeholder:"Menu item name",...s})}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"description",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Description"}),e.jsx(o,{children:e.jsx(Ce,{placeholder:"Menu item description",...s})}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"price",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Price ($)"}),e.jsx(o,{children:e.jsx(N,{type:"number",step:"0.01",min:"0",placeholder:"0.00",...s})}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"categoryId",render:({field:s})=>e.jsxs(d,{children:[e.jsx(x,{children:"Category"}),e.jsxs(E,{onValueChange:s.onChange,defaultValue:s.value?String(s.value):void 0,value:s.value?String(s.value):void 0,children:[e.jsx(o,{children:e.jsx(B,{children:e.jsx(T,{placeholder:"Select a category"})})}),e.jsx(H,{children:m.map(a=>e.jsx(v,{value:String(a.id),children:a.name},a.id))})]}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"active",render:({field:s})=>e.jsxs(d,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(o,{children:e.jsx("input",{type:"checkbox",checked:s.value,onChange:s.onChange,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsx(x,{className:"text-sm font-normal",children:"Active (available for ordering)"})]})}),e.jsxs(te,{children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>{p(!1),K(null)},children:"Cancel"}),e.jsx(r,{type:"submit",disabled:M,children:M?"Saving...":"Save"})]})]})})]})})]})}const Re=({category:n,onEdit:c,onDelete:j})=>e.jsx(f,{className:"mb-3",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-base",children:n.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sort order: ",n.sortOrder]})]}),e.jsxs(ve,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(P,{onClick:()=>c(n),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(P,{onClick:()=>j(n.id),className:"text-destructive",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})}),Ee=({item:n,onEdit:c,onDelete:j})=>e.jsx(f,{className:"mb-3",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-base",children:n.name}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:n.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"font-semibold text-lg",children:["$",(n.price/100).toFixed(2)]}),e.jsx(ke,{variant:n.active?"default":"secondary",children:n.active?"Active":"Inactive"})]})]}),e.jsxs(ve,{children:[e.jsx(fe,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsxs(be,{align:"end",children:[e.jsxs(P,{onClick:()=>c(n),children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(P,{onClick:()=>j(n.id),className:"text-destructive",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})});function Be({isCategoryDialogOpen:n,setIsCategoryDialogOpen:c,isMenuItemDialogOpen:j,setIsMenuItemDialogOpen:p,editingCategory:O,setEditingCategory:Y,editingMenuItem:q,setEditingMenuItem:K,activeCategory:y,setActiveCategory:Q,categories:m,filteredMenuItems:w,categoryForm:u,menuItemForm:i,handleEditCategory:U,handleDeleteCategory:W,handleEditMenuItem:X,handleDeleteMenuItem:Z,onCategorySubmit:_,onMenuItemSubmit:G,isCategoryLoading:S,isMenuItemLoading:M}){return e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Menu Builder"}),e.jsxs(r,{onClick:()=>p(!0),className:"w-full",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Menu Item"]})]}),e.jsxs(f,{children:[e.jsx(V,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(R,{className:"text-base",children:"Menu Items"}),e.jsxs(E,{value:y?String(y):"all",onValueChange:l=>Q(l==="all"?null:Number(l)),children:[e.jsx(B,{className:"w-full",children:e.jsx(T,{placeholder:"Filter by category"})}),e.jsxs(H,{children:[e.jsx(v,{value:"all",children:"All Categories"}),m.map(l=>e.jsx(v,{value:String(l.id),children:l.name},l.id))]})]})]})}),e.jsx(b,{className:"p-2",children:w.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No menu items yet. Create your first menu item to get started."})}):e.jsx("div",{className:"space-y-3",children:w.map(l=>e.jsx(Ee,{item:l,onEdit:X,onDelete:Z},l.id))})})]}),e.jsxs(f,{children:[e.jsx(V,{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(R,{className:"text-base",children:"Categories"}),e.jsxs(r,{variant:"outline",onClick:()=>c(!0),className:"w-full",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Add Category"]})]})}),e.jsx(b,{className:"p-2",children:m.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No categories yet. Create your first category to get started."})}):e.jsx("div",{className:"space-y-3",children:m.map(l=>e.jsx(Re,{category:l,onEdit:U,onDelete:W},l.id))})})]}),e.jsx(de,{open:n,onOpenChange:c,children:e.jsxs(xe,{children:[e.jsx(oe,{children:e.jsx(he,{children:O?"Edit Category":"Add Category"})}),e.jsx("div",{className:"px-4",children:e.jsx(z,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(_),className:"space-y-4",children:[e.jsx(t,{control:u.control,name:"name",render:({field:l})=>e.jsxs(d,{children:[e.jsx(x,{children:"Name"}),e.jsx(o,{children:e.jsx(N,{placeholder:"Category name",...l})}),e.jsx(h,{})]})}),e.jsx(t,{control:u.control,name:"sortOrder",render:({field:l})=>e.jsxs(d,{children:[e.jsx(x,{children:"Sort Order"}),e.jsx(o,{children:e.jsx(N,{type:"number",...l})}),e.jsx(h,{})]})}),e.jsxs(je,{className:"px-0",children:[e.jsx(r,{type:"submit",disabled:S,className:"w-full",children:S?"Saving...":"Save"}),e.jsx(r,{type:"button",variant:"outline",onClick:()=>{c(!1),Y(null)},className:"w-full",children:"Cancel"})]})]})})})]})}),e.jsx(de,{open:j,onOpenChange:p,children:e.jsxs(xe,{children:[e.jsx(oe,{children:e.jsx(he,{children:q?"Edit Menu Item":"Add Menu Item"})}),e.jsx("div",{className:"px-4 max-h-[70vh] overflow-y-auto",children:e.jsx(z,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(G),className:"space-y-4",children:[e.jsx(t,{control:i.control,name:"name",render:({field:l})=>e.jsxs(d,{children:[e.jsx(x,{children:"Name"}),e.jsx(o,{children:e.jsx(N,{placeholder:"Menu item name",...l})}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"description",render:({field:l})=>e.jsxs(d,{children:[e.jsx(x,{children:"Description"}),e.jsx(o,{children:e.jsx(Ce,{placeholder:"Menu item description",...l,className:"min-h-[80px]"})}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"price",render:({field:l})=>e.jsxs(d,{children:[e.jsx(x,{children:"Price ($)"}),e.jsx(o,{children:e.jsx(N,{type:"number",step:"0.01",min:"0",placeholder:"0.00",...l})}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"categoryId",render:({field:l})=>e.jsxs(d,{children:[e.jsx(x,{children:"Category"}),e.jsxs(E,{onValueChange:l.onChange,defaultValue:l.value?String(l.value):void 0,value:l.value?String(l.value):void 0,children:[e.jsx(o,{children:e.jsx(B,{children:e.jsx(T,{placeholder:"Select a category"})})}),e.jsx(H,{children:m.map(g=>e.jsx(v,{value:String(g.id),children:g.name},g.id))})]}),e.jsx(h,{})]})}),e.jsx(t,{control:i.control,name:"active",render:({field:l})=>e.jsxs(d,{className:"flex flex-row items-center gap-3 space-y-0 py-2",children:[e.jsx(o,{children:e.jsx("input",{type:"checkbox",checked:l.value,onChange:l.onChange,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsx(x,{className:"text-sm font-normal",children:"Active (available for ordering)"})]})}),e.jsxs(je,{className:"px-0 pt-6",children:[e.jsx(r,{type:"submit",disabled:M,className:"w-full",children:M?"Saving...":"Save"}),e.jsx(r,{type:"button",variant:"outline",onClick:()=>{p(!1),K(null)},className:"w-full",children:"Cancel"})]})]})})})]})})]})}function Oe(){const n=Se(),c=Me();return n?e.jsx(Be,{...c}):e.jsx(Ve,{...c})}export{Oe as MenuBuilder};
