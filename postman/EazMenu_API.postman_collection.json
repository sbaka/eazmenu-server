{
  "info": {
    "name": "Eazmenu API",
    "description": "Complete API collection for Eazmenu restaurant management system with QR code redirect functionality. QR codes generated by the Tables endpoints will redirect customers to the customer domain after validating the menu exists.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.1.0"
  },
  "auth": {
    "type": "noauth"
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Auto-set Content-Type for requests with body",
          "if (pm.request.body && pm.request.body.raw) {",
          "  pm.request.headers.add({",
          "    key: 'Content-Type',",
          "    value: 'application/json'",
          "  });",
          "}"
        ],
        "type": "text/javascript"
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3002",
      "type": "string"
    },
    {
      "key": "merchantId",
      "value": "",
      "type": "string"
    },
    {
      "key": "restaurantId",
      "value": "",
      "type": "string"
    },
    {
      "key": "tableId",
      "value": "",
      "type": "string"
    },
    {
      "key": "categoryId",
      "value": "",
      "type": "string"
    },
    {
      "key": "menuItemId",
      "value": "",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string"
    },
    {
      "key": "qrCode",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        },
        "description": "Check API health status"
      },
      "response": []
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"testmerchant\",\n  \"password\": \"Password123\",\n  \"email\": \"test@example.com\",\n  \"fullName\": \"Test Merchant\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "register"]
            },
            "description": "Register a new merchant account"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const responseJson = pm.response.json();",
                  "  pm.collectionVariables.set('merchantId', responseJson.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"testmerchant\",\n  \"password\": \"Password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "login"]
            },
            "description": "Login with merchant credentials"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const responseJson = pm.response.json();",
                  "  pm.collectionVariables.set('merchantId', responseJson.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/user",
              "host": ["{{baseUrl}}"],
              "path": ["api", "user"]
            },
            "description": "Get current authenticated user info"
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "logout"]
            },
            "description": "Logout current user"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Restaurants",
      "item": [
        {
          "name": "Get Restaurants",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/restaurants",
              "host": ["{{baseUrl}}"],
              "path": ["api", "restaurants"]
            },
            "description": "Get all restaurants for authenticated merchant"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const restaurants = pm.response.json();",
                  "  if (restaurants.length > 0) {",
                  "    pm.collectionVariables.set('restaurantId', restaurants[0].id);",
                  "  }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Dashboard",
      "item": [
        {
          "name": "Get Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/dashboard/{{restaurantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "dashboard", "{{restaurantId}}"]
            },
            "description": "Get dashboard statistics for a restaurant"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Get Categories",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/categories/{{restaurantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "{{restaurantId}}"]
            },
            "description": "Get all categories for a restaurant"
          },
          "response": []
        },
        {
          "name": "Create Category",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Appetizers\",\n  \"sortOrder\": 1,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/categories/{{restaurantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "{{restaurantId}}"]
            },
            "description": "Create a new category"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const category = pm.response.json();",
                  "  pm.collectionVariables.set('categoryId', category.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Appetizers\",\n  \"sortOrder\": 2,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/categories/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "{{categoryId}}"]
            },
            "description": "Update an existing category"
          },
          "response": []
        },
        {
          "name": "Delete Category",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/categories/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "categories", "{{categoryId}}"]
            },
            "description": "Delete a category"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Menu Items",
      "item": [
        {
          "name": "Get Menu Items by Restaurant",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/menu-items/{{restaurantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu-items", "{{restaurantId}}"]
            },
            "description": "Get all menu items for a restaurant"
          },
          "response": []
        },
        {
          "name": "Get Menu Items by Category",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/menu-items/category/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu-items", "category", "{{categoryId}}"]
            },
            "description": "Get menu items for a specific category"
          },
          "response": []
        },
        {
          "name": "Create Menu Item",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Spring Rolls\",\n  \"description\": \"Fresh spring rolls with vegetables\",\n  \"price\": \"8.99\",\n  \"categoryId\": {{categoryId}},\n  \"active\": true,\n  \"allergens\": [\"gluten\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/menu-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu-items"]
            },
            "description": "Create a new menu item"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const menuItem = pm.response.json();",
                  "  pm.collectionVariables.set('menuItemId', menuItem.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Menu Item",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Spring Rolls\",\n  \"description\": \"Updated fresh spring rolls with vegetables\",\n  \"price\": \"9.99\",\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/menu-items/{{menuItemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu-items", "{{menuItemId}}"]
            },
            "description": "Update an existing menu item"
          },
          "response": []
        },
        {
          "name": "Delete Menu Item",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/menu-items/{{menuItemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "menu-items", "{{menuItemId}}"]
            },
            "description": "Delete a menu item"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tables",
      "item": [
        {
          "name": "Get Tables",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tables?restaurantId={{restaurantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tables"],
              "query": [
                {
                  "key": "restaurantId",
                  "value": "{{restaurantId}}"
                }
              ]
            },
            "description": "Get all tables for a restaurant"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const tables = pm.response.json();",
                  "  if (tables.length > 0) {",
                  "    pm.collectionVariables.set('tableId', tables[0].id);",
                  "    pm.collectionVariables.set('qrCode', tables[0].qrCode);",
                  "  }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Create Table",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"number\": 1,\n  \"seats\": 4,\n  \"restaurantId\": {{restaurantId}},\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/tables",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tables"]
            },
            "description": "Create a new table"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const table = pm.response.json();",
                  "  pm.collectionVariables.set('tableId', table.id);",
                  "  pm.collectionVariables.set('qrCode', table.qrCode);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Update Table",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"number\": 1,\n  \"seats\": 6,\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/tables/{{tableId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tables", "{{tableId}}"]
            },
            "description": "Update an existing table"
          },
          "response": []
        },
        {
          "name": "Delete Table",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tables/{{tableId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tables", "{{tableId}}"]
            },
            "description": "Delete a table"
          },
          "response": []
        },
        {
          "name": "Generate QR Code for Table",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tables/{{tableId}}/qrcode",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tables", "{{tableId}}", "qrcode"]
            },
            "description": "Generate QR code for a specific table. The QR code will point to the customer menu redirect endpoint: {{baseUrl}}/api/customer/menu?qrCode={{qrCode}}&lang=en"
          },
          "response": []
        },
        {
          "name": "Generate All QR Codes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tables/qrcodes/all",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tables", "qrcodes", "all"]
            },
            "description": "Generate QR codes for all tables (heavy operation). Each QR code will point to the customer menu redirect endpoint with the table's unique QR code."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Place Order (Customer)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Client-Type",
                "value": "customer"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restaurantId\": {{restaurantId}},\n  \"tableId\": {{tableId}},\n  \"items\": [\n    {\n      \"menuItemId\": {{menuItemId}},\n      \"quantity\": 2,\n      \"price\": 8.99,\n      \"notes\": \"No onions please\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            },
            "description": "Place a new order from customer (no authentication required)"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "  const order = pm.response.json();",
                  "  pm.collectionVariables.set('orderId', order.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Get Orders by Restaurant (Staff)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/orders?restaurantId={{restaurantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"],
              "query": [
                {
                  "key": "restaurantId",
                  "value": "{{restaurantId}}"
                }
              ]
            },
            "description": "Get all orders for a restaurant (staff only)"
          },
          "response": []
        },
        {
          "name": "Update Order Status (Staff)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"In Progress\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "status"]
            },
            "description": "Update order status (staff only). Available statuses: Received, In Progress, Ready, Delivered, Cancelled"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Customer Menu",
      "item": [
        {
          "name": "QR Code Redirect (Browser Access)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Client-Type",
                "value": "customer"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/customer/menu?qrCode={{qrCode}}&lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["api", "customer", "menu"],
              "query": [
                {
                  "key": "qrCode",
                  "value": "{{qrCode}}"
                },
                {
                  "key": "lang",
                  "value": "en",
                  "description": "Language code (optional, defaults to 'en')"
                }
              ]
            },
            "description": "QR code redirect endpoint - validates QR code and redirects to customer domain if valid. Returns JSON error if invalid. This is the URL that QR codes point to."
          },
          "response": []
        },
        {
          "name": "Get Menu Data by QR Code (API)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Client-Type",
                "value": "customer"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/customer/menu-data?qrCode={{qrCode}}&lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["api", "customer", "menu-data"],
              "query": [
                {
                  "key": "qrCode",
                  "value": "{{qrCode}}"
                },
                {
                  "key": "lang",
                  "value": "en",
                  "description": "Language code (optional)"
                }
              ]
            },
            "description": "Get restaurant menu data as JSON via QR code (for API consumers). Returns complete menu structure with restaurant info, table details, categories, and menu items with translations."
          },
          "response": []
        },
        {
          "name": "Test QR Code Flow",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Client-Type",
                "value": "customer"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/customer/menu?qrCode={{qrCode}}&lang=fr",
              "host": ["{{baseUrl}}"],
              "path": ["api", "customer", "menu"],
              "query": [
                {
                  "key": "qrCode",
                  "value": "{{qrCode}}"
                },
                {
                  "key": "lang",
                  "value": "fr",
                  "description": "Test with French language"
                }
              ]
            },
            "description": "Test the complete QR code flow - this will redirect to the customer domain if the QR code is valid, or return an error JSON if invalid. Use this to test the QR code scanning experience."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Translations",
      "item": [
        {
          "name": "Create Language",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"fr\",\n  \"name\": \"French\",\n  \"active\": true,\n  \"isPrimary\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/restaurants/{{restaurantId}}/languages",
              "host": ["{{baseUrl}}"],
              "path": ["api", "restaurants", "{{restaurantId}}", "languages"]
            },
            "description": "Create a new language for a restaurant"
          },
          "response": []
        },
        {
          "name": "Create Menu Item Translation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"menuItemId\": {{menuItemId}},\n  \"languageCode\": \"fr\",\n  \"name\": \"Rouleaux de printemps\",\n  \"description\": \"Rouleaux de printemps frais aux légumes\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/restaurants/{{restaurantId}}/translations/menu-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "restaurants", "{{restaurantId}}", "translations", "menu-items"]
            },
            "description": "Create translation for a menu item"
          },
          "response": []
        },
        {
          "name": "Get Menu Item Translations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/restaurants/{{restaurantId}}/translations/menu-items/{{menuItemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "restaurants", "{{restaurantId}}", "translations", "menu-items", "{{menuItemId}}"]
            },
            "description": "Get all translations for a menu item"
          },
          "response": []
        },
        {
          "name": "Create Category Translation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"categoryId\": {{categoryId}},\n  \"languageCode\": \"fr\",\n  \"name\": \"Entrées\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/translations/categories",
              "host": ["{{baseUrl}}"],
              "path": ["api", "translations", "categories"]
            },
            "description": "Create translation for a category"
          },
          "response": []
        },
        {
          "name": "Get Category Translations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/translations/categories/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "translations", "categories", "{{categoryId}}"]
            },
            "description": "Get all translations for a category"
          },
          "response": []
        },
        {
          "name": "Auto Translate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Spring Rolls\",\n  \"targetLanguage\": \"fr\",\n  \"sourceLanguage\": \"en\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/translations/auto",
              "host": ["{{baseUrl}}"],
              "path": ["api", "translations", "auto"]
            },
            "description": "Auto-translate text to target language"
          },
          "response": []
        },
        {
          "name": "Get All Restaurant Translations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/restaurants/{{restaurantId}}/translations",
              "host": ["{{baseUrl}}"],
              "path": ["api", "restaurants", "{{restaurantId}}", "translations"]
            },
            "description": "Get all translations for a restaurant"
          },
          "response": []
        }
      ]
    }
  ]
}